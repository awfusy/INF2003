<!--
=========================================================
* * Black Dashboard - v1.0.1
=========================================================

* Product Page: https://www.creative-tim.com/product/black-dashboard
* Copyright 2019 Creative Tim (https://www.creative-tim.com)


* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
{% include 'includes/head.html' %}

<body class="">
  <div class="wrapper">
    <div class="sidebar">
      <!--
        Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red"
    -->
      <div class="sidebar-wrapper">
        <div class="logo">
          <a href="javascript:void(0)" class="simple-text logo-mini">
            AD
          </a>
          <a href="javascript:void(0)" class="simple-text logo-normal">
            INF2003 
          </a>
        </div>
        <ul class="nav">
          <li class="active ">
            <a href="./index.html">
              <i class="tim-icons icon-chart-pie-36"></i>
              <p>Dashboard</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
        {% include 'includes/nav.html' %}
      <div class="content bg-dark">
        <div class="row">
          <div class="col-12">
            <div class="card card-chart">
              <div class="card-header ">
                <div class="row">
                  <div class="col-sm-6 text-left">
                    <h5 class="card-category">What we want to find</h5>
                    <h2 class="dynamic-card-title">Revenue generated by category</h2>
                  </div>
                  <div class="col-sm-6 text-left">
                    <div class="dropdown-new">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Choose analysis
                        </button>
                          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="options">
                                <a class="dropdown-item" value="Query 1">Revenue Generated By category</a>
                                <a class="dropdown-item" value="Query 2">Product category with most in 5* review</a>
                                <a class="dropdown-item" value="Query 3">Most popular product category by geolocation</a>
                                <a class="dropdown-item" value="Query 4">Frequently Bought items</a>
                                <a class="dropdown-item" value="Query 5">Most revenue by location</a>
                                <a class="dropdown-item" value="Query 6">Most commonly used payment methods</a>
                                <a class="dropdown-item" value="Query 7">Average completion of processing time/ shipping time</a>
                                <a class="dropdown-item" value="Query 8">Average delivery time and freight fee</a>
                                <a class="dropdown-item" value="Query 9">Average customer reviews score on product category</a>
                                <a class="dropdown-item" value="Query 10">Categories with the most sellers</a>
                          </div>
                        </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="card-body col-12">
                  <div class="chart-area d-flex justify-content-center">
                      <!-- <canvas id="chartBig1"> -->
                      <img id="dynamicChartImage" src="chart_image" alt="Bar Chart">
                      <!-- </canvas> -->
                  </div>
                </div>                
              </div>
            </div>
            <div class="card card-chart">
              <div class="row">
                <h2 class="card-title col-12 d-flex justify-content-center">Query comparison</h2>
                <div class="card-body-sql col-6 text-center" >
                  <p>SQL:<br/> <span class="sql-content">
                    SELECT
                        p.product_category_name,
                        COUNT(DISTINCT oi.order_id) AS Num_orders,
                        SUM(oi.price) AS Revenue
                    FROM
                        olist_order_items_dataset oi
                    JOIN
                        olist_products_dataset p ON oi.product_id = p.product_id
                    JOIN
                        olist_orders_dataset o ON oi.order_id = o.order_id
                    WHERE
                        o.order_status <> 'canceled'
                        AND o.order_delivered_customer_date IS NOT NULL
                    GROUP BY
                        p.product_category_name
                    ORDER BY
                        Revenue DESC;
                  </span>
                    <br/><br/>
                    Average Time taken to Execute (ms): <span class="sql-time">100</span><br/>
                  </p>
                </div>
                <div class="card-body-nosql col-6 text-center">
                  <p>NoSQL:<br/><span class="nosql-content"></span>
                    <br/><br/>
                    Average Time taken to Execute (ms):<span class="nosql-time"></span> <br/>
                  </p>
                </div>
              </div>
            </div> 
            <div class="card card-chart">
              <div class="row">
                <h2 class="card-title col-12 d-flex justify-content-center">Analysis Result</h2>                
                <div class="card-body col-12 text-center">
                  <p class="final-analysis">
                    Final Analysis
                  </p>                                
                </div>
              </div>
            </div>
          </div>                   
            </div>
          </div>
          </div>
        </div>         
      {% include 'includes/footer.html' %}
    </div>
  </div>
  <!--   Core JS Files   -->
  <script src="{{url_for('static', filename='js/core/jquery.min.js')}}"></script>
  <script src="{{url_for('static', filename='js/core/popper.min.js')}}"></script>
  <script src="{{url_for('static', filename='js/core/bootstrap.min.js')}}"></script>
  <script src="{{url_for('static', filename='js/plugins/perfect-scrollbar.jquery.min.js')}}"></script>
  <!--  Google Maps Plugin    -->
  <!-- Place this tag in your head or just before your close body tag. -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
  <!-- Chart JS -->
  <script src="{{url_for('static', filename='js/plugins/chartjs.min.js')}}"></script>
  <!--  Notifications Plugin    -->
  <script src="{{url_for('static', filename='js/plugins/bootstrap-notify.js')}}"></script>
  <!-- Control Center for Black Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="{{url_for('static', filename='js/black-dashboard.min.js')}}"></script>

  <script>
    $(document).ready(function() {
      $().ready(function() {
        $sidebar = $('.sidebar');
        $navbar = $('.navbar');
        $main_panel = $('.main-panel');

        $full_page = $('.full-page');

        $sidebar_responsive = $('body > .navbar-collapse');
        sidebar_mini_active = true;
        white_color = false;

        window_width = $(window).width();

        fixed_plugin_open = $('.sidebar .sidebar-wrapper .nav li.active a p').html();

        $('.fixed-plugin a').click(function(event) {
          if ($(this).hasClass('switch-trigger')) {
            if (event.stopPropagation) {
              event.stopPropagation();
            } else if (window.event) {
              window.event.cancelBubble = true;
            }
          }
        });

        $('.fixed-plugin .background-color span').click(function() {
          $(this).siblings().removeClass('active');
          $(this).addClass('active');

          var new_color = $(this).data('color');

          if ($sidebar.length != 0) {
            $sidebar.attr('data', new_color);
          }

          if ($main_panel.length != 0) {
            $main_panel.attr('data', new_color);
          }

          if ($full_page.length != 0) {
            $full_page.attr('filter-color', new_color);
          }

          if ($sidebar_responsive.length != 0) {
            $sidebar_responsive.attr('data', new_color);
          }
        });

        $('.switch-sidebar-mini input').on("switchChange.bootstrapSwitch", function() {
          var $btn = $(this);

          if (sidebar_mini_active == true) {
            $('body').removeClass('sidebar-mini');
            sidebar_mini_active = false;
            blackDashboard.showSidebarMessage('Sidebar mini deactivated...');
          } else {
            $('body').addClass('sidebar-mini');
            sidebar_mini_active = true;
            blackDashboard.showSidebarMessage('Sidebar mini activated...');
          }

          // we simulate the window Resize so the charts will get updated in realtime.
          var simulateWindowResize = setInterval(function() {
            window.dispatchEvent(new Event('resize'));
          }, 180);

          // we stop the simulation of Window Resize after the animations are completed
          setTimeout(function() {
            clearInterval(simulateWindowResize);
          }, 1000);
        });

        $('.switch-change-color input').on("switchChange.bootstrapSwitch", function() {
          var $btn = $(this);

          if (white_color == true) {

            $('body').addClass('change-background');
            setTimeout(function() {
              $('body').removeClass('change-background');
              $('body').removeClass('white-content');
            }, 900);
            white_color = false;
          } else {

            $('body').addClass('change-background');
            setTimeout(function() {
              $('body').removeClass('change-background');
              $('body').addClass('white-content');
            }, 900);

            white_color = true;
          }


        });

        $('.light-badge').click(function() {
          $('body').addClass('white-content');
        });

        $('.dark-badge').click(function() {
          $('body').removeClass('white-content');
        });
      });
    });
  </script>
  <script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
  <script>
    window.TrackJS &&
      TrackJS.install({
        token: "ee6fab19c5a04ac1a32a645abde4613a",
        application: "black-dashboard-free"
      });
  </script>
<script>
  $(document).ready(function() {
    $('#options a').on('click', function() {

      var queryValue = $(this).attr('value');
      var newText;
      var newSql;
      var newSqlTime;
      var newNosql;
      var newNosqlTime;
      var finalAnalysis;
      switch (queryValue) {
        case 'Query 1':
          newText = 'Revenue Generated By category';
          newSql = '1111111111111111111111';
          newSqlTime = '100';
          newNosql = '4444444';
          newNosqlTime = '100';
          finalAnalysis='i am alot text';
          dynamicChartImageBase64 = '{{ chart_image }}'; // add this from app.py result to change image according to case
          break;
        case 'Query 2':
          newText = 'Product category with most in 5* review';
          newSql = '222';
          newSql = '333';
          newSqlTime = '444';
          newNosql = '66666';
          newNosqlTime = '111';
          finalAnalysis='asdasdasdasda';
          dynamicChartImageBase64 = '{{ chart_image_reviews }}'; // add this from app.py result to change image according to case
          break;
        case 'Query 3':
          newText = 'Most popular product category by geolocation';
          newSql = '1111111111111111111111';
          newSql = '1111111111111111111111';
          newSqlTime = '100';
          newNosql = '4444444';
          newNosqlTime = '100';
          finalAnalysis='i am alot text';
          break;
        case 'Query 4':
          newText = 'Frequently Bought items';
          newSql = '1111111111111111111111';
          newSql = '1111111111111111111111';
          newSqlTime = '100';
          newNosql = '4444444';
          newNosqlTime = '100';
          finalAnalysis='i am alot text';
          break;
        case 'Query 5':
          newText = 'Most revenue by location';
          newSql = '1111111111111111111111';
          newSql = '1111111111111111111111';
          newSqlTime = '100';
          newNosql = '4444444';
          newNosqlTime = '100';
          finalAnalysis='i am alot text';
          break;
        case 'Query 6':
          newText = 'Most commonly used payment methods';
          newSql = '1111111111111111111111';
          newSql = '1111111111111111111111';
          newSqlTime = '100';
          newNosql = '4444444';
          newNosqlTime = '100';
          finalAnalysis='i am alot text';
          break;
        case 'Query 7':
          newText = 'Average completion of processing time/ shipping time';
          newSql = '1111111111111111111111';
          newSql = '1111111111111111111111';
          newSqlTime = '100';
          newNosql = '4444444';
          newNosqlTime = '100';
          finalAnalysis='i am alot text';
          break;
        case 'Query 8':
          newText = 'Average delivery time and freight fee';
          newSql = '1111111111111111111111';
          newSql = '1111111111111111111111';
          newSqlTime = '100';
          newNosql = '4444444';
          newNosqlTime = '100';
          finalAnalysis='i am alot text';
          break;
        case 'Query 9':
          newText = 'Average customer reviews score on product category';
          newSql = '1111111111111111111111';
          newSql = '1111111111111111111111';
          newSqlTime = '100';
          newNosql = '4444444';
          newNosqlTime = '100';
          finalAnalysis='i am alot text';
          break;
        case 'Query 10':
          newText = 'Categories with the most sellers';
          newSql = '1111111111111111111111';
          newSql = '1111111111111111111111';
          newSqlTime = '100';
          newNosql = '4444444';
          newNosqlTime = '100';
          finalAnalysis='i am alot text';
          break;

      }

      $('.dynamic-card-title').text(newText);
      $('.sql-content').text(newSql);
      $('.sql-time').text(newSqlTime);
      $('.nosql-content').text(newNosql);
      $('.nosql-time').text(newNosqlTime);
      $('.final-analysis').text(finalAnalysis);

      // Set the dynamic chart image source
      $('#dynamicChartImage').attr('src', 'data:image/png;base64,' + dynamicChartImageBase64);
    });
  });
</script>
</body>

</html>